<div class="mt-5" style="overflow-x: auto;">
    <div class="figure1-plot-container mt-4" id="project_1_figure_2_container">
        <figure>
            <svg id="project_1_figure_2"></svg>
        </figure>
        <div>
            <div class="mb-2" style="text-align: center;">
                <select style="width:100%; border: solid 1px rgb(200,200,200);" id="yearSelect" class="form-select-sm"
                    aria-label="Default select example" onchange="onYearSelect()">
                    {{ range seq 2019 2023 }}
                    <option value="{{.}}">{{.}}</option>
                    {{ end }}
                </select>
            </div>
            <div id="figure_2_legend"></div>
        </div>
    </div>
</div>
<figcaption class="figure-caption" style="text-align: center;">
    Figure 2: The waffle plot shows the percentages of the annual CO2 storage rate of each operational CCS project
    towards the annual global count.
</figcaption>

<template id="figure_2_legend-grp-template">
    <div class="figure_2_legend-grp">
        <b>
            <div class="figure_2_legend-grp-header" style="font-size: 10px; color: white"></div>
        </b>
        <div class="figure_2_legend-grp-content"></div>
    </div>
</template>

<template id="figure_2_legend-btn-template">
    <div>
        <div class="figure_2_legend-btn" style="font-size: 10px;">
            <span class="figure_2_legend-color"></span>
            <span class="figure_2_legend-text"></span>
        </div>
    </div>
</template>

<script type="module">

    const allData = { "2019": [{ "id": "Sleipner", "country": "Norway", "facility": "Sleipner ", "year": 2019, "value": 0.482, "p": 0.01666339794410315, "n": 7, "pc": 0.40066500415627604, "nc": 160 }, { "id": "Snohvit", "country": "Norway", "facility": "Snohvit ", "year": 2019, "value": 0.721, "p": 0.024925954186096205, "n": 10, "pc": 0.5993349958437241, "nc": 240 }, { "id": "ADNOC_Al_Reyadah", "country": "United Arab Emirates", "facility": "ADNOC Al Reyadah", "year": 2019, "value": 0.8, "p": 0.02765709202340772, "n": 11, "pc": 1.0, "nc": 400 }, { "id": "Chevron_Gorgon", "country": "Australia", "facility": "Chevron Gorgon", "year": 2019, "value": 2.707, "p": 0.09358468513420586, "n": 37, "pc": 1.0, "nc": 400 }, { "id": "Petrobras_Santos_Basin_Pre-Salt_Oil_Field", "country": "Brazil", "facility": "Petrobras Santos Basin Pre-Salt Oil Field", "year": 2019, "value": 4.6, "p": 0.15902827913459436, "n": 64, "pc": 1.0, "nc": 400 }, { "id": "Alberta_Carbon_Trunk_Line_(ACTL)", "country": "Canada", "facility": "Alberta Carbon Trunk Line (ACTL) ", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Quest", "country": "Canada", "facility": "Quest ", "year": 2019, "value": 1.128, "p": 0.03899649975300488, "n": 16, "pc": 0.33264523739309937, "nc": 133 }, { "id": "Aquistore", "country": "Canada", "facility": "Aquistore", "year": 2019, "value": 0.27, "p": 0.009334268557900106, "n": 4, "pc": 0.07962253022707166, "nc": 32 }, { "id": "Weyburn-Midale", "country": "Canada", "facility": "Weyburn-Midale", "year": 2019, "value": 1.993, "p": 0.06890073050331448, "n": 27, "pc": 0.587732232379829, "nc": 235 }, { "id": "ShengLi__Oilfield", "country": "China", "facility": "ShengLi  Oilfield", "year": 2019, "value": 0.23, "p": 0.007951413956729719, "n": 3, "pc": 0.12234042553191489, "nc": 49 }, { "id": "Zhongyuan_Oilfield", "country": "China", "facility": "Zhongyuan Oilfield", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Yanchang_Integrated_Demonstration", "country": "China", "facility": "Yanchang Integrated Demonstration", "year": 2019, "value": 0.05, "p": 0.0017285682514629826, "n": 2, "pc": 0.026595744680851064, "nc": 11 }, { "id": "ShanDong_ZouCheng_Plant", "country": "China", "facility": "ShanDong ZouCheng Plant", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Xinjiang_Ordos_Basin", "country": "China", "facility": "Xinjiang Ordos Basin", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "ShanXi_Datong_CO2_Sequestration_Project", "country": "China", "facility": "ShanXi Datong CO2 Sequestration Project ", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Karamay_Dunhua", "country": "China", "facility": "Karamay Dunhua", "year": 2019, "value": 0.1, "p": 0.003457136502925965, "n": 1, "pc": 0.05319148936170213, "nc": 21 }, { "id": "Jilin_Oilfield", "country": "China", "facility": "Jilin Oilfield", "year": 2019, "value": 1.5, "p": 0.05185704754388947, "n": 21, "pc": 0.7978723404255319, "nc": 319 }, { "id": "Qatar_LNG", "country": "Qatar", "facility": "Qatar LNG", "year": 2019, "value": 0.56, "p": 0.019359964416385406, "n": 8, "pc": 1.0, "nc": 400 }, { "id": "Uthmaniyah_Carbon_Dioxide_Enhanced_Oil_Recovery_(CO2-EOR)_Demonstration_Project", "country": "Saudi Arabia", "facility": "Uthmaniyah Carbon Dioxide Enhanced Oil Recovery (CO2-EOR) Demonstration Project", "year": 2019, "value": 0.114, "p": 0.0039411356133356, "n": 1, "pc": 1.0, "nc": 400 }, { "id": "Denver_Unit_/_Wasson_San_Andres_Field", "country": "USA", "facility": "Denver Unit / Wasson San Andres Field", "year": 2019, "value": 7.05, "p": 0.2437281234562805, "n": 97, "pc": 0.515702482240633, "nc": 207 }, { "id": "Illinois_Inustrial_CCS", "country": "USA", "facility": "Illinois Inustrial CCS ", "year": 2019, "value": 0.52, "p": 0.01797710981521502, "n": 7, "pc": 0.038037629895763, "nc": 15 }, { "id": "North_Burbank_Unit", "country": "USA", "facility": "North Burbank Unit", "year": 2019, "value": 1.16, "p": 0.04010278343394119, "n": 16, "pc": 0.08485317438285592, "nc": 34 }, { "id": "Core_Energy__Otsego_County_EOR_Operations", "country": "USA", "facility": "Core Energy  Otsego County EOR Operations", "year": 2019, "value": 0.382859, "p": 0.01323595824373732, "n": 5, "pc": 0.028005863354349857, "nc": 11 }, { "id": "Shute_Creek", "country": "USA", "facility": "Shute Creek", "year": 2019, "value": 0.376409, "p": 0.013012972939298595, "n": 5, "pc": 0.027534050445065874, "nc": 11 }, { "id": "30-30_Gas_Plant", "country": "USA", "facility": "30-30 Gas Plant", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Illinois_Industrial_Carbon_Capture_and_Sequestration_Project", "country": "USA", "facility": "Illinois Industrial Carbon Capture and Sequestration Project", "year": 2019, "value": 0.519779, "p": 0.01796946954354355, "n": 7, "pc": 0.0380214639030573, "nc": 15 }, { "id": "Barnett_RDC_Well_No._1", "country": "USA", "facility": "Barnett RDC Well No. 1", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Blue_Flint_CO2_Storage_Project", "country": "USA", "facility": "Blue Flint CO2 Storage Project", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Campo_Viejo_Gas_Processing_Plant", "country": "USA", "facility": "Campo Viejo Gas Processing Plant", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Camrick_Unit", "country": "USA", "facility": "Camrick Unit", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Hobbs_Field", "country": "USA", "facility": "Hobbs Field", "year": 2019, "value": 3.661626, "p": 0.12658740904662788, "n": 51, "pc": 0.2678453357782752, "nc": 107 }, { "id": "Petra_Nova_West_Ranch", "country": "USA", "facility": "Petra Nova West Ranch", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Red_Trail_Energy,_LLC", "country": "USA", "facility": "Red Trail Energy, LLC", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Red_Hills_Gas_Processing_Plant", "country": "USA", "facility": "Red Hills Gas Processing Plant", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Seminole_East_Field_(SEF)", "country": "USA", "facility": "Seminole East Field (SEF)", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Seminole_San_Andres_Unit", "country": "USA", "facility": "Seminole San Andres Unit", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "West_Seminole_San_Andres_Unit", "country": "USA", "facility": "West Seminole San Andres Unit", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Farnsworth_Unit_CO2_Flood", "country": "USA", "facility": "Farnsworth Unit CO2 Flood", "year": 2019, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }], "2020": [{ "id": "Sleipner", "country": "Norway", "facility": "Sleipner ", "year": 2020, "value": 0.506, "p": 0.01844779185582489, "n": 7, "pc": 0.5452586206896552, "nc": 218 }, { "id": "Snohvit", "country": "Norway", "facility": "Snohvit ", "year": 2020, "value": 0.422, "p": 0.015385312575411272, "n": 6, "pc": 0.45474137931034486, "nc": 182 }, { "id": "ADNOC_Al_Reyadah", "country": "United Arab Emirates", "facility": "ADNOC Al Reyadah", "year": 2020, "value": 0.8, "p": 0.029166469337272558, "n": 12, "pc": 1.0, "nc": 400 }, { "id": "Chevron_Gorgon", "country": "Australia", "facility": "Chevron Gorgon", "year": 2020, "value": 2.1706, "p": 0.07913592292935476, "n": 32, "pc": 1.0, "nc": 400 }, { "id": "Petrobras_Santos_Basin_Pre-Salt_Oil_Field", "country": "Brazil", "facility": "Petrobras Santos Basin Pre-Salt Oil Field", "year": 2020, "value": 7.0, "p": 0.2552066067011349, "n": 102, "pc": 1.0, "nc": 400 }, { "id": "Alberta_Carbon_Trunk_Line_(ACTL)", "country": "Canada", "facility": "Alberta Carbon Trunk Line (ACTL) ", "year": 2020, "value": 0.933, "p": 0.03401539486459412, "n": 13, "pc": 0.23232071713147412, "nc": 93 }, { "id": "Quest", "country": "Canada", "facility": "Quest ", "year": 2020, "value": 0.941, "p": 0.03430705955796684, "n": 14, "pc": 0.23431274900398405, "nc": 94 }, { "id": "Aquistore", "country": "Canada", "facility": "Aquistore", "year": 2020, "value": 0.37, "p": 0.013489492068488557, "n": 5, "pc": 0.09213147410358566, "nc": 37 }, { "id": "Weyburn-Midale", "country": "Canada", "facility": "Weyburn-Midale", "year": 2020, "value": 1.772, "p": 0.0646037295820587, "n": 26, "pc": 0.44123505976095617, "nc": 176 }, { "id": "ShengLi__Oilfield", "country": "China", "facility": "ShengLi  Oilfield", "year": 2020, "value": 0.298, "p": 0.010864509828134026, "n": 4, "pc": 0.12691652470187395, "nc": 51 }, { "id": "Zhongyuan_Oilfield", "country": "China", "facility": "Zhongyuan Oilfield", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Yanchang_Integrated_Demonstration", "country": "China", "facility": "Yanchang Integrated Demonstration", "year": 2020, "value": 0.05, "p": 0.0018229043335795348, "n": 2, "pc": 0.021294718909710394, "nc": 8 }, { "id": "ShanDong_ZouCheng_Plant", "country": "China", "facility": "ShanDong ZouCheng Plant", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Xinjiang_Ordos_Basin", "country": "China", "facility": "Xinjiang Ordos Basin", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "ShanXi_Datong_CO2_Sequestration_Project", "country": "China", "facility": "ShanXi Datong CO2 Sequestration Project ", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Karamay_Dunhua", "country": "China", "facility": "Karamay Dunhua", "year": 2020, "value": 0.1, "p": 0.0036458086671590697, "n": 1, "pc": 0.04258943781942079, "nc": 17 }, { "id": "Jilin_Oilfield", "country": "China", "facility": "Jilin Oilfield", "year": 2020, "value": 1.9, "p": 0.06927036467602232, "n": 28, "pc": 0.8091993185689949, "nc": 324 }, { "id": "Qatar_LNG", "country": "Qatar", "facility": "Qatar LNG", "year": 2020, "value": 0.63, "p": 0.022968594603102136, "n": 9, "pc": 1.0, "nc": 400 }, { "id": "Uthmaniyah_Carbon_Dioxide_Enhanced_Oil_Recovery_(CO2-EOR)_Demonstration_Project", "country": "Saudi Arabia", "facility": "Uthmaniyah Carbon Dioxide Enhanced Oil Recovery (CO2-EOR) Demonstration Project", "year": 2020, "value": 0.114, "p": 0.004156221880561339, "n": 2, "pc": 1.0, "nc": 400 }, { "id": "Denver_Unit_/_Wasson_San_Andres_Field", "country": "USA", "facility": "Denver Unit / Wasson San Andres Field", "year": 2020, "value": 4.95, "p": 0.18046752902437393, "n": 72, "pc": 0.5253574101981107, "nc": 210 }, { "id": "Illinois_Inustrial_CCS", "country": "USA", "facility": "Illinois Inustrial CCS ", "year": 2020, "value": 0.51978, "p": 0.018950184290159412, "n": 7, "pc": 0.055165712055105856, "nc": 22 }, { "id": "North_Burbank_Unit", "country": "USA", "facility": "North Burbank Unit", "year": 2020, "value": 0.660309, "p": 0.02407360275203138, "n": 10, "pc": 0.070080449731415, "nc": 28 }, { "id": "Core_Energy__Otsego_County_EOR_Operations", "country": "USA", "facility": "Core Energy  Otsego County EOR Operations", "year": 2020, "value": 0.21315, "p": 0.007771041174049557, "n": 3, "pc": 0.02262220848156107, "nc": 9 }, { "id": "Shute_Creek", "country": "USA", "facility": "Shute Creek", "year": 2020, "value": 0.418418, "p": 0.015254719708953635, "n": 6, "pc": 0.04440787815359052, "nc": 18 }, { "id": "30-30_Gas_Plant", "country": "USA", "facility": "30-30 Gas Plant", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Illinois_Industrial_Carbon_Capture_and_Sequestration_Project", "country": "USA", "facility": "Illinois Industrial Carbon Capture and Sequestration Project", "year": 2020, "value": 0.521581, "p": 0.019015845304254944, "n": 8, "pc": 0.055356857246169844, "nc": 22 }, { "id": "Barnett_RDC_Well_No._1", "country": "USA", "facility": "Barnett RDC Well No. 1", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Blue_Flint_CO2_Storage_Project", "country": "USA", "facility": "Blue Flint CO2 Storage Project", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Campo_Viejo_Gas_Processing_Plant", "country": "USA", "facility": "Campo Viejo Gas Processing Plant", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Camrick_Unit", "country": "USA", "facility": "Camrick Unit", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Hobbs_Field", "country": "USA", "facility": "Hobbs Field", "year": 2020, "value": 2.138919, "p": 0.0779808942855121, "n": 31, "pc": 0.227009484134047, "nc": 91 }, { "id": "Petra_Nova_West_Ranch", "country": "USA", "facility": "Petra Nova West Ranch", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Red_Trail_Energy,_LLC", "country": "USA", "facility": "Red Trail Energy, LLC", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Red_Hills_Gas_Processing_Plant", "country": "USA", "facility": "Red Hills Gas Processing Plant", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Seminole_East_Field_(SEF)", "country": "USA", "facility": "Seminole East Field (SEF)", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Seminole_San_Andres_Unit", "country": "USA", "facility": "Seminole San Andres Unit", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "West_Seminole_San_Andres_Unit", "country": "USA", "facility": "West Seminole San Andres Unit", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Farnsworth_Unit_CO2_Flood", "country": "USA", "facility": "Farnsworth Unit CO2 Flood", "year": 2020, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }], "2021": [{ "id": "Sleipner", "country": "Norway", "facility": "Sleipner ", "year": 2021, "value": 0.322, "p": 0.012013179427840618, "n": 5, "pc": 1.0, "nc": 400 }, { "id": "Snohvit", "country": "Norway", "facility": "Snohvit ", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "ADNOC_Al_Reyadah", "country": "United Arab Emirates", "facility": "ADNOC Al Reyadah", "year": 2021, "value": 0.8, "p": 0.02984640851637421, "n": 12, "pc": 1.0, "nc": 400 }, { "id": "Chevron_Gorgon", "country": "Australia", "facility": "Chevron Gorgon", "year": 2021, "value": 1.656, "p": 0.0617820656288946, "n": 25, "pc": 1.0, "nc": 400 }, { "id": "Petrobras_Santos_Basin_Pre-Salt_Oil_Field", "country": "Brazil", "facility": "Petrobras Santos Basin Pre-Salt Oil Field", "year": 2021, "value": 8.7, "p": 0.32457969261556946, "n": 130, "pc": 1.0, "nc": 400 }, { "id": "Alberta_Carbon_Trunk_Line_(ACTL)", "country": "Canada", "facility": "Alberta Carbon Trunk Line (ACTL) ", "year": 2021, "value": 1.24, "p": 0.046261933200380016, "n": 18, "pc": 0.26569530747803727, "nc": 106 }, { "id": "Quest", "country": "Canada", "facility": "Quest ", "year": 2021, "value": 1.055, "p": 0.03935995123096848, "n": 16, "pc": 0.22605528176558817, "nc": 90 }, { "id": "Aquistore", "country": "Canada", "facility": "Aquistore", "year": 2021, "value": 0.45, "p": 0.01678860479046049, "n": 7, "pc": 0.09642168416541676, "nc": 39 }, { "id": "Weyburn-Midale", "country": "Canada", "facility": "Weyburn-Midale", "year": 2021, "value": 1.922, "p": 0.07170599646058902, "n": 29, "pc": 0.4118277265909578, "nc": 165 }, { "id": "ShengLi__Oilfield", "country": "China", "facility": "ShengLi  Oilfield", "year": 2021, "value": 0.3076, "p": 0.011475944074545882, "n": 4, "pc": 0.12516276041666669, "nc": 50 }, { "id": "Zhongyuan_Oilfield", "country": "China", "facility": "Zhongyuan Oilfield", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Yanchang_Integrated_Demonstration", "country": "China", "facility": "Yanchang Integrated Demonstration", "year": 2021, "value": 0.05, "p": 0.001865400532273388, "n": 2, "pc": 0.020345052083333336, "nc": 8 }, { "id": "ShanDong_ZouCheng_Plant", "country": "China", "facility": "ShanDong ZouCheng Plant", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Xinjiang_Ordos_Basin", "country": "China", "facility": "Xinjiang Ordos Basin", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "ShanXi_Datong_CO2_Sequestration_Project", "country": "China", "facility": "ShanXi Datong CO2 Sequestration Project ", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Karamay_Dunhua", "country": "China", "facility": "Karamay Dunhua", "year": 2021, "value": 0.1, "p": 0.003730801064546776, "n": 1, "pc": 0.04069010416666667, "nc": 16 }, { "id": "Jilin_Oilfield", "country": "China", "facility": "Jilin Oilfield", "year": 2021, "value": 2.0, "p": 0.07461602129093552, "n": 30, "pc": 0.8138020833333334, "nc": 326 }, { "id": "Qatar_LNG", "country": "Qatar", "facility": "Qatar LNG", "year": 2021, "value": 0.62, "p": 0.023130966600190008, "n": 9, "pc": 1.0, "nc": 400 }, { "id": "Uthmaniyah_Carbon_Dioxide_Enhanced_Oil_Recovery_(CO2-EOR)_Demonstration_Project", "country": "Saudi Arabia", "facility": "Uthmaniyah Carbon Dioxide Enhanced Oil Recovery (CO2-EOR) Demonstration Project", "year": 2021, "value": 0.114, "p": 0.004253113213583324, "n": 2, "pc": 1.0, "nc": 400 }, { "id": "Denver_Unit_/_Wasson_San_Andres_Field", "country": "USA", "facility": "Denver Unit / Wasson San Andres Field", "year": 2021, "value": 2.61, "p": 0.09737390778467084, "n": 39, "pc": 0.34952415834649625, "nc": 140 }, { "id": "Illinois_Inustrial_CCS", "country": "USA", "facility": "Illinois Inustrial CCS ", "year": 2021, "value": 0.443928, "p": 0.01656207054982121, "n": 6, "pc": 0.05944964006377142, "nc": 24 }, { "id": "North_Burbank_Unit", "country": "USA", "facility": "North Burbank Unit", "year": 2021, "value": 0.714124, "p": 0.026642545794184014, "n": 11, "pc": 0.09563355940805873, "nc": 38 }, { "id": "Core_Energy__Otsego_County_EOR_Operations", "country": "USA", "facility": "Core Energy  Otsego County EOR Operations", "year": 2021, "value": 0.232994, "p": 0.008692542632330115, "n": 3, "pc": 0.03120192787348029, "nc": 12 }, { "id": "Shute_Creek", "country": "USA", "facility": "Shute Creek", "year": 2021, "value": 0.424816, "p": 0.01584903985036503, "n": 6, "pc": 0.05689021258702114, "nc": 23 }, { "id": "30-30_Gas_Plant", "country": "USA", "facility": "30-30 Gas Plant", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Illinois_Industrial_Carbon_Capture_and_Sequestration_Project", "country": "USA", "facility": "Illinois Industrial Carbon Capture and Sequestration Project", "year": 2021, "value": 0.519779, "p": 0.019391920465290584, "n": 8, "pc": 0.06960740134144962, "nc": 28 }, { "id": "Barnett_RDC_Well_No._1", "country": "USA", "facility": "Barnett RDC Well No. 1", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Blue_Flint_CO2_Storage_Project", "country": "USA", "facility": "Blue Flint CO2 Storage Project", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Campo_Viejo_Gas_Processing_Plant", "country": "USA", "facility": "Campo Viejo Gas Processing Plant", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Camrick_Unit", "country": "USA", "facility": "Camrick Unit", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Hobbs_Field", "country": "USA", "facility": "Hobbs Field", "year": 2021, "value": 1.706149, "p": 0.06365302505475416, "n": 25, "pc": 0.2284828709726882, "nc": 91 }, { "id": "Petra_Nova_West_Ranch", "country": "USA", "facility": "Petra Nova West Ranch", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Red_Trail_Energy,_LLC", "country": "USA", "facility": "Red Trail Energy, LLC", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Red_Hills_Gas_Processing_Plant", "country": "USA", "facility": "Red Hills Gas Processing Plant", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Seminole_East_Field_(SEF)", "country": "USA", "facility": "Seminole East Field (SEF)", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Seminole_San_Andres_Unit", "country": "USA", "facility": "Seminole San Andres Unit", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "West_Seminole_San_Andres_Unit", "country": "USA", "facility": "West Seminole San Andres Unit", "year": 2021, "value": 0.815505, "p": 0.030424869221432185, "n": 12, "pc": 0.10921022940703427, "nc": 44 }, { "id": "Farnsworth_Unit_CO2_Flood", "country": "USA", "facility": "Farnsworth Unit CO2 Flood", "year": 2021, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }], "2022": [{ "id": "Sleipner", "country": "Norway", "facility": "Sleipner ", "year": 2022, "value": 0.115, "p": 0.003953534079584091, "n": 1, "pc": 0.22243713733075435, "nc": 89 }, { "id": "Snohvit", "country": "Norway", "facility": "Snohvit ", "year": 2022, "value": 0.402, "p": 0.013820179999937432, "n": 5, "pc": 0.7775628626692457, "nc": 311 }, { "id": "ADNOC_Al_Reyadah", "country": "United Arab Emirates", "facility": "ADNOC Al Reyadah", "year": 2022, "value": 0.8, "p": 0.027502845771019763, "n": 11, "pc": 1.0, "nc": 400 }, { "id": "Chevron_Gorgon", "country": "Australia", "facility": "Chevron Gorgon", "year": 2022, "value": 1.72, "p": 0.05913111840769249, "n": 23, "pc": 1.0, "nc": 400 }, { "id": "Petrobras_Santos_Basin_Pre-Salt_Oil_Field", "country": "Brazil", "facility": "Petrobras Santos Basin Pre-Salt Oil Field", "year": 2022, "value": 10.6, "p": 0.36441270646601187, "n": 146, "pc": 1.0, "nc": 400 }, { "id": "Alberta_Carbon_Trunk_Line_(ACTL)", "country": "Canada", "facility": "Alberta Carbon Trunk Line (ACTL) ", "year": 2022, "value": 1.034, "p": 0.03554742815904304, "n": 14, "pc": 0.4127744510978044, "nc": 165 }, { "id": "Quest", "country": "Canada", "facility": "Quest ", "year": 2022, "value": 0.971, "p": 0.033381579054575235, "n": 13, "pc": 0.387624750499002, "nc": 155 }, { "id": "Aquistore", "country": "Canada", "facility": "Aquistore", "year": 2022, "value": 0.5, "p": 0.01718927860688735, "n": 7, "pc": 0.1996007984031936, "nc": 80 }, { "id": "Weyburn-Midale", "country": "Canada", "facility": "Weyburn-Midale", "year": 2022, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "ShengLi__Oilfield", "country": "China", "facility": "ShengLi  Oilfield", "year": 2022, "value": 0.657, "p": 0.02258671208944998, "n": 9, "pc": 0.18357082984073764, "nc": 73 }, { "id": "Zhongyuan_Oilfield", "country": "China", "facility": "Zhongyuan Oilfield", "year": 2022, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Yanchang_Integrated_Demonstration", "country": "China", "facility": "Yanchang Integrated Demonstration", "year": 2022, "value": 0.05, "p": 0.0017189278606887352, "n": 2, "pc": 0.013970382788488405, "nc": 5 }, { "id": "ShanDong_ZouCheng_Plant", "country": "China", "facility": "ShanDong ZouCheng Plant", "year": 2022, "value": 0.001, "p": 3.43785572137747e-05, "n": 1, "pc": 0.0002794076557697681, "nc": 1 }, { "id": "Xinjiang_Ordos_Basin", "country": "China", "facility": "Xinjiang Ordos Basin", "year": 2022, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "ShanXi_Datong_CO2_Sequestration_Project", "country": "China", "facility": "ShanXi Datong CO2 Sequestration Project ", "year": 2022, "value": 0.001, "p": 3.43785572137747e-05, "n": 1, "pc": 0.0002794076557697681, "nc": 1 }, { "id": "Karamay_Dunhua", "country": "China", "facility": "Karamay Dunhua", "year": 2022, "value": 0.1, "p": 0.0034378557213774704, "n": 1, "pc": 0.02794076557697681, "nc": 11 }, { "id": "Jilin_Oilfield", "country": "China", "facility": "Jilin Oilfield", "year": 2022, "value": 2.77, "p": 0.09522860348215594, "n": 38, "pc": 0.7739592064822576, "nc": 309 }, { "id": "Qatar_LNG", "country": "Qatar", "facility": "Qatar LNG", "year": 2022, "value": 0.59, "p": 0.020283348756127074, "n": 8, "pc": 1.0, "nc": 400 }, { "id": "Uthmaniyah_Carbon_Dioxide_Enhanced_Oil_Recovery_(CO2-EOR)_Demonstration_Project", "country": "Saudi Arabia", "facility": "Uthmaniyah Carbon Dioxide Enhanced Oil Recovery (CO2-EOR) Demonstration Project", "year": 2022, "value": 0.316, "p": 0.010863624079552806, "n": 4, "pc": 1.0, "nc": 400 }, { "id": "Denver_Unit_/_Wasson_San_Andres_Field", "country": "USA", "facility": "Denver Unit / Wasson San Andres Field", "year": 2022, "value": 3.0, "p": 0.10313567164132412, "n": 41, "pc": 0.3545722505374429, "nc": 142 }, { "id": "Illinois_Inustrial_CCS", "country": "USA", "facility": "Illinois Inustrial CCS ", "year": 2022, "value": 0.42858, "p": 0.014733962050679563, "n": 6, "pc": 0.050654191711779095, "nc": 20 }, { "id": "North_Burbank_Unit", "country": "USA", "facility": "North Burbank Unit", "year": 2022, "value": 0.65243, "p": 0.02242960208298303, "n": 9, "pc": 0.0771111911393813, "nc": 31 }, { "id": "Core_Energy__Otsego_County_EOR_Operations", "country": "USA", "facility": "Core Energy  Otsego County EOR Operations", "year": 2022, "value": 0.311307, "p": 0.010702285510548562, "n": 4, "pc": 0.036793607866019915, "nc": 15 }, { "id": "Shute_Creek", "country": "USA", "facility": "Shute Creek", "year": 2022, "value": 0.395332, "p": 0.013590943780435983, "n": 5, "pc": 0.0467245856498228, "nc": 19 }, { "id": "30-30_Gas_Plant", "country": "USA", "facility": "30-30 Gas Plant", "year": 2022, "value": 0.012, "p": 0.00041254268656529643, "n": 1, "pc": 0.0014182890021497718, "nc": 1 }, { "id": "Illinois_Industrial_Carbon_Capture_and_Sequestration_Project", "country": "USA", "facility": "Illinois Industrial Carbon Capture and Sequestration Project", "year": 2022, "value": 0.42858, "p": 0.014733962050679563, "n": 6, "pc": 0.050654191711779095, "nc": 20 }, { "id": "Barnett_RDC_Well_No._1", "country": "USA", "facility": "Barnett RDC Well No. 1", "year": 2022, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Blue_Flint_CO2_Storage_Project", "country": "USA", "facility": "Blue Flint CO2 Storage Project", "year": 2022, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Campo_Viejo_Gas_Processing_Plant", "country": "USA", "facility": "Campo Viejo Gas Processing Plant", "year": 2022, "value": 0.076658, "p": 0.0026353914388935413, "n": 1, "pc": 0.0090602665272331, "nc": 4 }, { "id": "Camrick_Unit", "country": "USA", "facility": "Camrick Unit", "year": 2022, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Hobbs_Field", "country": "USA", "facility": "Hobbs Field", "year": 2022, "value": 2.189392, "p": 0.07526813813538062, "n": 30, "pc": 0.2587658829162244, "nc": 103 }, { "id": "Petra_Nova_West_Ranch", "country": "USA", "facility": "Petra Nova West Ranch", "year": 2022, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Red_Trail_Energy,_LLC", "country": "USA", "facility": "Red Trail Energy, LLC", "year": 2022, "value": 0.081963, "p": 0.0028177696849126157, "n": 1, "pc": 0.009687268456933478, "nc": 4 }, { "id": "Red_Hills_Gas_Processing_Plant", "country": "USA", "facility": "Red Hills Gas Processing Plant", "year": 2022, "value": 0.023775, "p": 0.0008173501977574936, "n": 1, "pc": 0.002809985085509235, "nc": 1 }, { "id": "Seminole_East_Field_(SEF)", "country": "USA", "facility": "Seminole East Field (SEF)", "year": 2022, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Seminole_San_Andres_Unit", "country": "USA", "facility": "Seminole San Andres Unit", "year": 2022, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "West_Seminole_San_Andres_Unit", "country": "USA", "facility": "West Seminole San Andres Unit", "year": 2022, "value": 0.768681, "p": 0.02642614373764155, "n": 10, "pc": 0.09085098403845737, "nc": 36 }, { "id": "Farnsworth_Unit_CO2_Flood", "country": "USA", "facility": "Farnsworth Unit CO2 Flood", "year": 2022, "value": 0.092201, "p": 0.0031697373536672415, "n": 1, "pc": 0.010897305357267592, "nc": 4 }], "2023": [{ "id": "Sleipner", "country": "Norway", "facility": "Sleipner ", "year": 2023, "value": 0.0, "p": 0.0, "n": 0, "pc": 0, "nc": 0 }, { "id": "Snohvit", "country": "Norway", "facility": "Snohvit ", "year": 2023, "value": 0.0, "p": 0.0, "n": 0, "pc": 0, "nc": 0 }, { "id": "ADNOC_Al_Reyadah", "country": "United Arab Emirates", "facility": "ADNOC Al Reyadah", "year": 2023, "value": 0.8, "p": 0.021354225567348607, "n": 8, "pc": 1.0, "nc": 400 }, { "id": "Chevron_Gorgon", "country": "Australia", "facility": "Chevron Gorgon", "year": 2023, "value": 1.5943, "p": 0.04255630227752986, "n": 17, "pc": 1.0, "nc": 400 }, { "id": "Petrobras_Santos_Basin_Pre-Salt_Oil_Field", "country": "Brazil", "facility": "Petrobras Santos Basin Pre-Salt Oil Field", "year": 2023, "value": 13.0, "p": 0.3470061654694149, "n": 138, "pc": 1.0, "nc": 400 }, { "id": "Alberta_Carbon_Trunk_Line_(ACTL)", "country": "Canada", "facility": "Alberta Carbon Trunk Line (ACTL) ", "year": 2023, "value": 1.477649, "p": 0.039442562569208875, "n": 15, "pc": 0.5956703265959836, "nc": 238 }, { "id": "Quest", "country": "Canada", "facility": "Quest ", "year": 2023, "value": 1.003, "p": 0.026772860305063314, "n": 10, "pc": 0.4043296734040165, "nc": 162 }, { "id": "Aquistore", "country": "Canada", "facility": "Aquistore", "year": 2023, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Weyburn-Midale", "country": "Canada", "facility": "Weyburn-Midale", "year": 2023, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "ShengLi__Oilfield", "country": "China", "facility": "ShengLi  Oilfield", "year": 2023, "value": 0.472, "p": 0.012598993084735678, "n": 5, "pc": 0.2131887985546522, "nc": 85 }, { "id": "Zhongyuan_Oilfield", "country": "China", "facility": "Zhongyuan Oilfield", "year": 2023, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "Yanchang_Integrated_Demonstration", "country": "China", "facility": "Yanchang Integrated Demonstration", "year": 2023, "value": 0.05, "p": 0.001334639097959288, "n": 1, "pc": 0.022583559168925023, "nc": 9 }, { "id": "ShanDong_ZouCheng_Plant", "country": "China", "facility": "ShanDong ZouCheng Plant", "year": 2023, "value": 0.001, "p": 2.669278195918576e-05, "n": 1, "pc": 0.0004516711833785005, "nc": 1 }, { "id": "Xinjiang_Ordos_Basin", "country": "China", "facility": "Xinjiang Ordos Basin", "year": 2023, "value": 0.0, "p": 0.0, "n": 0, "pc": 0.0, "nc": 0 }, { "id": "ShanXi_Datong_CO2_Sequestration_Project", "country": "China", "facility": "ShanXi Datong CO2 Sequestration Project ", "year": 2023, "value": 0.001, "p": 2.669278195918576e-05, "n": 1, "pc": 0.0004516711833785005, "nc": 1 }, { "id": "Karamay_Dunhua", "country": "China", "facility": "Karamay Dunhua", "year": 2023, "value": 0.1, "p": 0.002669278195918576, "n": 1, "pc": 0.045167118337850046, "nc": 18 }, { "id": "Jilin_Oilfield", "country": "China", "facility": "Jilin Oilfield", "year": 2023, "value": 1.59, "p": 0.04244152331510536, "n": 17, "pc": 0.7181571815718157, "nc": 287 }, { "id": "Qatar_LNG", "country": "Qatar", "facility": "Qatar LNG", "year": 2023, "value": 0.68, "p": 0.018151091732246317, "n": 7, "pc": 1.0, "nc": 400 }, { "id": "Uthmaniyah_Carbon_Dioxide_Enhanced_Oil_Recovery_(CO2-EOR)_Demonstration_Project", "country": "Saudi Arabia", "facility": "Uthmaniyah Carbon Dioxide Enhanced Oil Recovery (CO2-EOR) Demonstration Project", "year": 2023, "value": 0.0, "p": 0.0, "n": 0, "pc": 0, "nc": 0 }, { "id": "Denver_Unit_/_Wasson_San_Andres_Field", "country": "USA", "facility": "Denver Unit / Wasson San Andres Field", "year": 2023, "value": 3.67, "p": 0.09796250979021173, "n": 39, "pc": 0.2198346923380236, "nc": 88 }, { "id": "Illinois_Inustrial_CCS", "country": "USA", "facility": "Illinois Inustrial CCS ", "year": 2023, "value": 0.543979, "p": 0.01452031283737591, "n": 5, "pc": 0.03258459294369094, "nc": 13 }, { "id": "North_Burbank_Unit", "country": "USA", "facility": "North Burbank Unit", "year": 2023, "value": 0.6313768, "p": 0.016853203256488435, "n": 6, "pc": 0.037819761465222305, "nc": 15 }, { "id": "Core_Energy__Otsego_County_EOR_Operations", "country": "USA", "facility": "Core Energy  Otsego County EOR Operations", "year": 2023, "value": 0.260586, "p": 0.00695576527961638, "n": 2, "pc": 0.015609221563377717, "nc": 6 }, { "id": "Shute_Creek", "country": "USA", "facility": "Shute Creek", "year": 2023, "value": 0.43508, "p": 0.01161349557480254, "n": 4, "pc": 0.02606149262736439, "nc": 10 }, { "id": "30-30_Gas_Plant", "country": "USA", "facility": "30-30 Gas Plant", "year": 2023, "value": 0.01, "p": 0.00026692781959185757, "n": 1, "pc": 0.0005990046112752688, "nc": 1 }, { "id": "Illinois_Industrial_Carbon_Capture_and_Sequestration_Project", "country": "USA", "facility": "Illinois Industrial Carbon Capture and Sequestration Project", "year": 2023, "value": 0.543978, "p": 0.01452028614459395, "n": 5, "pc": 0.03258453304322981, "nc": 13 }, { "id": "Barnett_RDC_Well_No._1", "country": "USA", "facility": "Barnett RDC Well No. 1", "year": 2023, "value": 0.008, "p": 0.00021354225567348607, "n": 1, "pc": 0.000479203689020215, "nc": 1 }, { "id": "Blue_Flint_CO2_Storage_Project", "country": "USA", "facility": "Blue Flint CO2 Storage Project", "year": 2023, "value": 0.03, "p": 0.0008007834587755728, "n": 1, "pc": 0.001797013833825806, "nc": 1 }, { "id": "Campo_Viejo_Gas_Processing_Plant", "country": "USA", "facility": "Campo Viejo Gas Processing Plant", "year": 2023, "value": 0.0095305, "p": 0.0002543955584620199, "n": 1, "pc": 0.0005708813447758949, "nc": 1 }, { "id": "Camrick_Unit", "country": "USA", "facility": "Camrick Unit", "year": 2023, "value": 0.033759, "p": 0.000901121626160152, "n": 1, "pc": 0.0020221796672041797, "nc": 1 }, { "id": "Hobbs_Field", "country": "USA", "facility": "Hobbs Field", "year": 2023, "value": 5.198001, "p": 0.1387491073166295, "n": 55, "pc": 0.3113626568413458, "nc": 124 }, { "id": "Petra_Nova_West_Ranch", "country": "USA", "facility": "Petra Nova West Ranch", "year": 2023, "value": 0.36, "p": 0.009609401505306873, "n": 4, "pc": 0.021564166005909675, "nc": 8 }, { "id": "Red_Trail_Energy,_LLC", "country": "USA", "facility": "Red Trail Energy, LLC", "year": 2023, "value": 0.165834, "p": 0.0044265708034196116, "n": 1, "pc": 0.009933533070622292, "nc": 4 }, { "id": "Red_Hills_Gas_Processing_Plant", "country": "USA", "facility": "Red Hills Gas Processing Plant", "year": 2023, "value": 0.02236, "p": 0.0005968506046073936, "n": 1, "pc": 0.001339374310811501, "nc": 1 }, { "id": "Seminole_East_Field_(SEF)", "country": "USA", "facility": "Seminole East Field (SEF)", "year": 2023, "value": 0.032576, "p": 0.0008695440651024353, "n": 1, "pc": 0.0019513174216903154, "nc": 1 }, { "id": "Seminole_San_Andres_Unit", "country": "USA", "facility": "Seminole San Andres Unit", "year": 2023, "value": 3.932897, "p": 0.1049799620889358, "n": 42, "pc": 0.23558234386706706, "nc": 94 }, { "id": "West_Seminole_San_Andres_Unit", "country": "USA", "facility": "West Seminole San Andres Unit", "year": 2023, "value": 0.736405, "p": 0.01965669809865419, "n": 8, "pc": 0.044110999076616426, "nc": 17 }, { "id": "Farnsworth_Unit_CO2_Flood", "country": "USA", "facility": "Farnsworth Unit CO2 Flood", "year": 2023, "value": 0.07, "p": 0.0018684947371430034, "n": 1, "pc": 0.004193032278926882, "nc": 1 }] };
    const figure2Meta = [{ "id": "Sleipner", "name": "Sleipner ", "color": "rgb(189,189,189)", "category": 0, "country": "Norway", "storage_type": "Geological Storage ", "operator": "Equinor " }, { "id": "Snohvit", "name": "Snohvit ", "color": "rgb(99,99,99)", "category": 0, "country": "Norway", "storage_type": "Geological Storage ", "operator": "Equinor " }, { "id": "ADNOC_Al_Reyadah", "name": "ADNOC Al Reyadah", "color": "rgb(194,230,153)", "category": 1, "country": "United Arab Emirates", "storage_type": "EOR", "operator": "Abu Dhabi National Oil Company (ADNOC)" }, { "id": "Chevron_Gorgon", "name": "Chevron Gorgon", "color": "rgb(44,127,184)", "category": 2, "country": "Australia", "storage_type": "Geological Storage ", "operator": "Chevron (C) & Exxon Mobile (EM) & Shell (S)" }, { "id": "Petrobras_Santos_Basin_Pre-Salt_Oil_Field", "name": "Petrobras Santos Basin Pre-Salt Oil Field", "color": "rgb(161,217,155)", "category": 3, "country": "Brazil", "storage_type": "EOR", "operator": "Petrobras " }, { "id": "Alberta_Carbon_Trunk_Line_(ACTL)", "name": "Alberta Carbon Trunk Line (ACTL) ", "color": "rgb(242,240,247)", "category": 4, "country": "Canada", "storage_type": "EOR", "operator": "Enhance Energy Inc. and  North West Redwater Partnership" }, { "id": "Quest", "name": "Quest ", "color": "rgb(203,201,226)", "category": 4, "country": "Canada", "storage_type": "Geological Storage ", "operator": "Shell" }, { "id": "Aquistore", "name": "Aquistore", "color": "rgb(158,154,200)", "category": 4, "country": "Canada", "storage_type": "EOR", "operator": "SaskPower (SP)/Petroleum Technology Research Centre (PTRC)" }, { "id": "Weyburn-Midale", "name": "Weyburn-Midale", "color": "rgb(106,81,163)", "category": 4, "country": "Canada", "storage_type": "EOR", "operator": "Cenovus Energy/Petroleum Technology Research Centre(PTRC)-2000-2015, but 2012 come to an end injection/Whitecap Resources (W) from 2017" }, { "id": "ShengLi__Oilfield", "name": "ShengLi  Oilfield", "color": "rgb(255,245,240)", "category": 5, "country": "China", "storage_type": "EOR", "operator": "China Petroleum and Chemical Corporation (Sinopec)" }, { "id": "Zhongyuan_Oilfield", "name": "Zhongyuan Oilfield", "color": "rgb(254,224,210)", "category": 5, "country": "China", "storage_type": "Crude Oil", "operator": "China Petroleum and Chemical Corporation (Sinopec)" }, { "id": "Yanchang_Integrated_Demonstration", "name": "Yanchang Integrated Demonstration", "color": "rgb(252,187,161)", "category": 5, "country": "China", "storage_type": "EOR with MVR", "operator": "Shaanxi Yangchang China Coal Yulin Energy Chemical Co. Ltd. (Yulin Energy Chemical) and Shaanxi Yanchang Petroleum (Group) Co. Ltd" }, { "id": "ShanDong_ZouCheng_Plant", "name": "ShanDong ZouCheng Plant", "color": "rgb(252,146,114)", "category": 5, "country": "China", "storage_type": "Industrial Use", "operator": "The Dalian Institute of Chemical Physic, Chinese Academy of Sciences" }, { "id": "Xinjiang_Ordos_Basin", "name": "Xinjiang Ordos Basin", "color": "rgb(251,106,74)", "category": 5, "country": "China", "storage_type": "Saline Formation", "operator": "China Energy Investment Corporation (China Energy)" }, { "id": "ShanXi_Datong_CO2_Sequestration_Project", "name": "ShanXi Datong CO2 Sequestration Project ", "color": "rgb(239,59,44)", "category": 5, "country": "China", "storage_type": "Industrial Use", "operator": "China Energy Investment Corporation (China Energy)" }, { "id": "Karamay_Dunhua", "name": "Karamay Dunhua", "color": "rgb(203,24,29)", "category": 5, "country": "China", "storage_type": "EOR ", "operator": "Xinjiang Dunhua Oil Technology Company" }, { "id": "Jilin_Oilfield", "name": "Jilin Oilfield", "color": "rgb(153,0,13)", "category": 5, "country": "China", "storage_type": "EOR ", "operator": "China National Petroleum Corporation (CNPC)" }, { "id": "Qatar_LNG", "name": "Qatar LNG", "color": "rgb(254,153,41)", "category": 6, "country": "Qatar", "storage_type": "Geological Storage ", "operator": "Chevron (C) & Exxon Mobile (EM) & Shell (S)" }, { "id": "Uthmaniyah_Carbon_Dioxide_Enhanced_Oil_Recovery_(CO2-EOR)_Demonstration_Project", "name": "Uthmaniyah Carbon Dioxide Enhanced Oil Recovery (CO2-EOR) Demonstration Project", "color": "rgb(204,76,2)", "category": 7, "country": "Saudi Arabia", "storage_type": "EOR with MVR", "operator": " Saudi Aramco" }, { "id": "Denver_Unit_/_Wasson_San_Andres_Field", "name": "Denver Unit / Wasson San Andres Field", "color": "rgb(247,244,249)", "category": 8, "country": "USA", "storage_type": "EOR", "operator": "OXY" }, { "id": "Illinois_Inustrial_CCS", "name": "Illinois Inustrial CCS ", "color": "rgb(231,225,239)", "category": 8, "country": "USA", "storage_type": "Geological Storage ", "operator": "Archer Daniels Midland Co. (ADM)" }, { "id": "North_Burbank_Unit", "name": "North Burbank Unit", "color": "rgb(212,185,218)", "category": 8, "country": "USA", "storage_type": "EOR", "operator": "Perdure Petroleum, LLC" }, { "id": "Core_Energy__Otsego_County_EOR_Operations", "name": "Core Energy  Otsego County EOR Operations", "color": "rgb(201,148,199)", "category": 8, "country": "USA", "storage_type": "EOR", "operator": "Core Energy" }, { "id": "Shute_Creek", "name": "Shute Creek", "color": "rgb(223,101,176)", "category": 8, "country": "USA", "storage_type": "EOR", "operator": "Chevron (C) & Exxon Mobile (EM) & Shell (S)" }, { "id": "30-30_Gas_Plant", "name": "30-30 Gas Plant", "color": "rgb(231,41,138)", "category": 8, "country": "USA", "storage_type": "EOR ", "operator": "Stakeholder Gas Services, LLC" }, { "id": "Illinois_Industrial_Carbon_Capture_and_Sequestration_Project", "name": "Illinois Industrial Carbon Capture and Sequestration Project", "color": "rgb(206,18,86)", "category": 8, "country": "USA", "storage_type": null, "operator": "Archer Daniels Midland Co." }, { "id": "Barnett_RDC_Well_No._1", "name": "Barnett RDC Well No. 1", "color": "rgb(152,0,67)", "category": 8, "country": "USA", "storage_type": null, "operator": "BKV dCarbon Ventures, LLC" }, { "id": "Blue_Flint_CO2_Storage_Project", "name": "Blue Flint CO2 Storage Project", "color": "rgb(103,0,31)", "category": 8, "country": "USA", "storage_type": null, "operator": "Blue Flint Sequester Company, LLC" }, { "id": "Campo_Viejo_Gas_Processing_Plant", "name": "Campo Viejo Gas Processing Plant", "color": "rgb(255,247,243)", "category": 8, "country": "USA", "storage_type": null, "operator": "Stakeholder Gas Services, LLC" }, { "id": "Camrick_Unit", "name": "Camrick Unit", "color": "rgb(253,224,221)", "category": 8, "country": "USA", "storage_type": "EOR ", "operator": "CapturePoint, LLC" }, { "id": "Hobbs_Field", "name": "Hobbs Field", "color": "rgb(252,197,192)", "category": 8, "country": "USA", "storage_type": "EOR ", "operator": "Occidental Permian Ltd, Occidental Petroleum Corporation, and their affiliates" }, { "id": "Petra_Nova_West_Ranch", "name": "Petra Nova West Ranch", "color": "rgb(250,159,181)", "category": 8, "country": "USA", "storage_type": "EOR ", "operator": "Petra Nova, LLC" }, { "id": "Red_Trail_Energy,_LLC", "name": "Red Trail Energy, LLC", "color": "rgb(247,104,161)", "category": 8, "country": "USA", "storage_type": null, "operator": "Red Trail Energy, LLC" }, { "id": "Red_Hills_Gas_Processing_Plant", "name": "Red Hills Gas Processing Plant", "color": "rgb(221,52,151)", "category": 8, "country": "USA", "storage_type": null, "operator": "Lucid Energy Delaware, LLC" }, { "id": "Seminole_East_Field_(SEF)", "name": "Seminole East Field (SEF)", "color": "rgb(174,1,126)", "category": 8, "country": "USA", "storage_type": "EOR ", "operator": "Stakeholder Gas Services, LLC" }, { "id": "Seminole_San_Andres_Unit", "name": "Seminole San Andres Unit", "color": "rgb(122,1,119)", "category": 8, "country": "USA", "storage_type": "EOR ", "operator": "OXY USA, INC" }, { "id": "West_Seminole_San_Andres_Unit", "name": "West Seminole San Andres Unit", "color": "rgb(73,0,106)", "category": 8, "country": "USA", "storage_type": "EOR ", "operator": "OXY USA WTP LP" }, { "id": "Farnsworth_Unit_CO2_Flood", "name": "Farnsworth Unit CO2 Flood", "color": "rgb(129,15,124)", "category": 8, "country": "USA", "storage_type": "EOR", "operator": "CapturePoint LLC  (previously Perdure Petroleum, LLC)" }];
    const categories = [
        { 'id': 0, 'name': 'Norway', 'color': 'rgb(189,189,189)' },
        { 'id': 1, 'name': 'United Arab Emirates', 'color': 'rgb(194,230,153)' },
        { 'id': 2, 'name': 'Australia', 'color': 'rgb(44,127,184)' },
        { 'id': 3, 'name': 'Brazil', 'color': 'rgb(161,217,155)' },
        { 'id': 4, 'name': 'Canada', 'color': 'rgb(106,81,163)' },
        { 'id': 5, 'name': 'China', 'color': 'rgb(239,59,44)' },
        { 'id': 6, 'name': 'Qatar', 'color': 'rgb(254,153,41)' },
        { 'id': 7, 'name': 'Saudi Arabia', 'color': 'rgb(204,76,2)' },
        { 'id': 8, 'name': 'USA', 'color': 'rgb(206,18,86)' }
    ];
    const color = (id) => {
        return figure2Meta.find(x => x.id == id).color
    };

    let currentYear = 2023;
    let data = allData[currentYear];
    const nSquares = 20;

    const tooltip = d3.select("#project_1_figure_2_container").append("div")
        .style("position", "absolute")
        .style("background", "rgba(255,255,255,0.9)")
        .style("border", "1px solid black")
        .style("padding", "5px")
        .style("border-radius", "5px")
        .style("visibility", "hidden")
        .style("font-size", "12px");

    const buildToolTipDiv = (meta) => {
        console.log(meta)
        const { facility, year, country, p, pc } = meta;

        return `
        <div><b>Facility:</b></div>
    <div id="itemId">${facility}</div>

    <div><b>Country:</b></div>
    <div id="country-value">${country}</div>

    <div><b id="year-title">${year}:</b></div>
    <div id="year-value">${onlyVisibleCategory?pc.toFixed(4)*100:p.toFixed(4)*100}%</div>
        `
    }

    const drawChart = (waffles) => {
        const chartData = data;
        const margin = { top: 20, right: 20, bottom: 20, left: 20 };
        const options = {
            shape: "rect",
            style: "whole"
        }
        const isRect = options.shape === "rect";
        const whole = options.style === "whole";
        const width = 1000 - margin.left - margin.right;
        const height = 860 - margin.top - margin.bottom;
        const waffleSize = Math.min(width, height);

        const sequence = (length) => Array.apply(null, { length: length }).map((d, i) => i);
        const scale = d3.scaleBand()
            .domain(sequence(nSquares))
            .range([0, waffleSize])
            .padding(0.1)

        const svg = d3.select("#project_1_figure_2")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
        // .attr("transform", `translate(${margin.left},${margin.top})`);
        // .style("cursor", "default")
        // .attr("viewBox", [0, 0, width, height])


        const g = svg.selectAll(".waffle")
            .data(waffles)
            .join("g")
            .attr("class", "waffle")
            .attr("transform", `translate(${(width + margin.left + margin.right - waffleSize) / 2},0)`);

        const cellSize = scale.bandwidth();
        const half = cellSize / 2;
        const cells = g.append("g")
            .selectAll(options.shape)
            .data(d => d)
            .join(options.shape)
            .attr("fill", (d) => {
                return d.index == -1 ? "rgb(240,240,240)" : color(d.meta.id)
            }).on("mouseover", (event, d) => {
                const htmlContent = buildToolTipDiv(d.meta);
                tooltip.style("visibility", "visible")
                    .html(htmlContent);
            })
            .on("mousemove", (event) => {
                tooltip.style("top", (event.pageY - 10) + "px")
                    .style("left", (event.pageX + 10) + "px");
            })
            .on("mouseout", () => {
                tooltip.style("visibility", "hidden");
            });
        // .attr("stroke", "rgba(156,156,156,1)")
        // .attr("stroke-width", 1);
        cells.attr("x", d => scale(d.x))
            .attr("y", d => whole ? 0 : scale(d.y))
            .attr("width", cellSize).attr("height", cellSize)

        cells.transition()
            .attr("y", d => scale(d.y) + (isRect ? 0 : half));

        return svg.node();
    }

    const makeWaffle = () => {
        const chartData = data;
        d3.select("#project_1_figure_2").selectAll("*").remove();
        const waffles = [];
        const max = chartData.length;

        let index = 0, curr = 1,
            accu = Math.round(onlyVisibleCategory == null ? chartData[0].n : chartData[0].nc), waffle = [];

        for (let y = nSquares - 1; y >= 0; y--)
            for (let x = 0; x < nSquares; x++) {
                if (curr > accu && index < max) {
                    let r = onlyVisibleCategory == null ? Math.round(chartData[++index].n) : Math.round(chartData[++index].nc);
                    while (r === 0 && index < max) {
                        r = onlyVisibleCategory == null ? Math.round(chartData[++index].n) : Math.round(chartData[++index].nc);
                    }
                    accu += r;
                }
                waffle.push({ x, y, index, meta: chartData[index] });
                curr++;
            }
        waffles.push(waffle);
        return waffles;
    }

    const makeChart = () => {
        try {
            const waffles = makeWaffle()
            drawChart(waffles)
        } catch (error) {
            const waffles = []
            for (let y = nSquares - 1; y >= 0; y--) {
                for (let x = 0; x < nSquares; x++) {
                    waffles.push({ x, y, index: -1, meta: {} });
                }
            }
            drawChart([waffles])
        }
    }

    let visibleIds = new Set(figure2Meta.map(item => item.id));
    let colorfulIds = new Set(figure2Meta.map(item => item.id));
    let onlyVisibleCategory = null;

    const changeLegendBtnColor = (id) => {
        const item = figure2Meta.find(x => x.id == id);
        const legendBtn = document.getElementById(`figure_2_legend-btn-${item.id}`);
        const legendColor = legendBtn.querySelector('.figure_2_legend-color')
        legendColor.style.backgroundColor = item.color;
        const legendText = legendBtn.querySelector('.figure_2_legend-text')

        if (visibleIds.has(id)) {
            if (onlyVisibleCategory == null) {
                legendText.textContent = `${item.name} (${(data.find(x => x.id == item.id).p * 100).toFixed(2)}%)`;
            } else {
                legendText.textContent = `${item.name} (${(data.find(x => x.id == item.id).pc * 100).toFixed(2)}%)`;
            }
            legendColor.style.backgroundColor = item.color
            legendText.style.color = "";
        } else {
            legendText.textContent = item.name;
            legendColor.style.backgroundColor = "rgba(0,0,0,0.1)";
            legendText.style.color = "rgba(0,0,0,0.2)";
        }
    }

    const changeLegendGrpHeaderColor = (grpId, grpName) => {
        const grpMeta = categories.find(x => x.id == grpId);
        const grpHeader = document.getElementById(`figure_2_legend-grp-header-${grpId}`);
        if (onlyVisibleCategory == grpName || onlyVisibleCategory == null) {
            grpHeader.style.backgroundColor = grpMeta.color;
            grpHeader.style.color = "white";
        } else {
            grpHeader.style.backgroundColor = "rgba(0,0,0,0.05)";
            grpHeader.style.color = "rgba(0,0,0,0.2)";
        }
    }

    const onlyShowGroup = (grpId, grpName) => {
        if (onlyVisibleCategory == grpName) {
            onlyVisibleCategory = null;
            visibleIds = new Set(figure2Meta.map(item => item.id));
            data = allData[currentYear]
        } else {
            onlyVisibleCategory = grpName;
            const grpLegendIds = figure2Meta.filter(item => item.country == grpName).map(item => item.id);
            visibleIds = new Set(grpLegendIds);
            data = allData[currentYear].filter(x => x.country == onlyVisibleCategory);
        }
        figure2Meta.forEach(item => {
            changeLegendBtnColor(item.id);
        })
        categories.forEach(item => changeLegendGrpHeaderColor(item.id, item.name));
    }

    const changeIdColorful = (ids) => {
        ids.forEach((x) => {
            if (colorfulIds.has(x)) {
                colorfulIds.delete(x);
            } else {
                colorfulIds.add(x);
            }
        });

        figure2Meta.forEach(item => {
            changeLegendBtnColor(item.id);
        })
    }

    const legendDiv = document.getElementById("figure_2_legend")

    const drawLegends = (grpMeta, grpObj) => {

        const grpLegends = figure2Meta.filter((item) => {
            return item.category == grpMeta.id
        });

        grpLegends.forEach((item) => {
            const template = document.getElementById('figure_2_legend-btn-template');
            const clone = template.content.cloneNode(true);

            const legendColor = clone.querySelector('.figure_2_legend-color')
            legendColor.style.backgroundColor = item.color;
            const legendText = clone.querySelector('.figure_2_legend-text')
            legendText.textContent = `${item.name} (${(data.find(x => x.id == item.id).p * 100).toFixed(2)}%)`;

            const legendBtn = clone.querySelector('.figure_2_legend-btn')
            legendBtn.id = `figure_2_legend-btn-${item.id}`;
            // legendBtn.onclick = (e) => {
            //     changeIdColorful([item.id])
            //     legendText.textContent = `${item.name}`
            //     if (colorfulIds.has(item.id)) {
            //         legendColor.style.backgroundColor = item.color
            //         legendText.style.color = "";
            //     } else {
            //         legendColor.style.backgroundColor = "rgba(0,0,0,0.1)";
            //         legendText.style.color = "rgba(0,0,0,0.2)";
            //     }
            // };

            grpObj.appendChild(clone)
        })
    }

    categories.forEach((cat) => {
        const grpTemplate = document.getElementById('figure_2_legend-grp-template');
        const grpClone = grpTemplate.content.cloneNode(true);

        const grpHeader = grpClone.querySelector('.figure_2_legend-grp-header');
        grpHeader.id = `figure_2_legend-grp-header-${cat.id}`;
        grpHeader.style.backgroundColor = cat.color;
        grpHeader.textContent = cat.name;
        grpHeader.onclick = (e) => {
            onlyShowGroup(cat.id, cat.name);
            makeChart()
        }

        const grpContent = grpClone.querySelector('.figure_2_legend-grp-content');
        drawLegends(cat, grpContent);
        legendDiv.appendChild(grpClone);
    })

    window.onYearSelect = () => {
        const selectElement = document.getElementById("yearSelect");
        currentYear = selectElement.value;
        if (onlyVisibleCategory) {
            data = allData[currentYear].filter(x => x.country == onlyVisibleCategory);
        } else {
            data = allData[currentYear]
        }
        makeChart()
    }

    window.onload = () => {
        document.getElementById("yearSelect").value = currentYear;
        makeChart()
    }

</script>