<svg></svg>
<script type="module">
    const margin = { top: 20, right: 30, bottom: 30, left: 40 },
        width = 1000 - margin.left - margin.right,
        height = 1000 - margin.top - margin.bottom;

    const svg = d3.select("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

    // Sample Data
    const data = [{"year": "1996", "facility_0": 0.07, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 0.0, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "1997", "facility_0": 0.665, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 0.0, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "1998", "facility_0": 0.842, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 0.0, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "1999", "facility_0": 0.971, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 0.0, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2000", "facility_0": 0.933, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 1.55, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2001", "facility_0": 1.009, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 1.55, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2002", "facility_0": 0.955, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 1.55, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2003", "facility_0": 0.914, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 1.55, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2004", "facility_0": 0.75, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 1.55, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2005", "facility_0": 0.858, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 1.55, "facility_9": 0.0, "facility_10": 0.0, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2006", "facility_0": 0.82, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 1.55, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2007", "facility_0": 0.921, "facility_1": 0.0, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.0, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 1.55, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 0.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2008", "facility_0": 0.814, "facility_1": 0.197, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.3625, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 1.55, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 4.4, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2009", "facility_0": 0.86, "facility_1": 0.308, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.3625, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 2.67, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 4.6, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2010", "facility_0": 0.743, "facility_1": 0.46, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.3625, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 2.67, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 4.8, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2011", "facility_0": 0.929, "facility_1": 0.403, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.3625, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 2.67, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.1, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.034, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 5.0, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2012", "facility_0": 0.842, "facility_1": 0.49, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.3625, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 0.0, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.0, "facility_12": 0.0, "facility_13": 0.1, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.326, "facility_21": 0.0, "facility_22": 0.0, "facility_23": 4.8, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2013", "facility_0": 0.702, "facility_1": 0.469, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.3625, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 0.0, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.05, "facility_12": 0.0, "facility_13": 0.1, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.334, "facility_21": 0.75, "facility_22": 0.0, "facility_23": 5.9, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.092}, {"year": "2014", "facility_0": 0.658, "facility_1": 0.587, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.3625, "facility_5": 0.0, "facility_6": 0.0, "facility_7": 0.0, "facility_8": 2.127, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.05, "facility_12": 0.0, "facility_13": 0.1, "facility_14": 0.0, "facility_15": 0.0, "facility_16": 0.0, "facility_17": 0.0, "facility_18": 0.0, "facility_19": 0.0, "facility_20": 0.301, "facility_21": 0.75, "facility_22": 0.0, "facility_23": 6.9, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.092}, {"year": "2015", "facility_0": 0.707, "facility_1": 0.679, "facility_2": 0.0, "facility_3": 0.0, "facility_4": 0.3625, "facility_5": 0.0, "facility_6": 0.371, "facility_7": 0.036, "facility_8": 2.07794, "facility_9": 0.0, "facility_10": 0.27, "facility_11": 0.05, "facility_12": 0.0, "facility_13": 0.1, "facility_14": 0.0, "facility_15": 0.1, "facility_16": 0.94, "facility_17": 0.0, "facility_18": 0.114, "facility_19": 0.0, "facility_20": 0.0, "facility_21": 0.75, "facility_22": 0.0, "facility_23": 6.9, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.092}, {"year": "2016", "facility_0": 0.632, "facility_1": 0.75, "facility_2": 0.8, "facility_3": 0.0, "facility_4": 1.6, "facility_5": 0.0, "facility_6": 1.11, "facility_7": 0.1, "facility_8": 1.972025, "facility_9": 0.3, "facility_10": 0.0, "facility_11": 0.05, "facility_12": 0.0, "facility_13": 0.1, "facility_14": 0.0, "facility_15": 0.1, "facility_16": 2.0, "facility_17": 0.0, "facility_18": 0.114, "facility_19": 3.09, "facility_20": 0.0, "facility_21": 0.75, "facility_22": 0.0, "facility_23": 6.3, "facility_24": 0.0, "facility_25": 0.0, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 0.0, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.092}, {"year": "2017", "facility_0": 0.557, "facility_1": 0.68, "facility_2": 0.8, "facility_3": 0.0, "facility_4": 2.5, "facility_5": 0.0, "facility_6": 1.138, "facility_7": 0.142, "facility_8": 1.79364, "facility_9": 0.19, "facility_10": 0.0, "facility_11": 0.05, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.1, "facility_16": 1.1, "facility_17": 0.0, "facility_18": 0.114, "facility_19": 5.45, "facility_20": 0.507, "facility_21": 1.16, "facility_22": 0.0, "facility_23": 6.6, "facility_24": 0.0, "facility_25": 0.506649, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 2.071626, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.092}, {"year": "2018", "facility_0": 0.509, "facility_1": 0.758, "facility_2": 0.8, "facility_3": 0.0, "facility_4": 2.8, "facility_5": 0.0, "facility_6": 1.066, "facility_7": 0.18, "facility_8": 1.973197, "facility_9": 0.24, "facility_10": 0.0, "facility_11": 0.05, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.1, "facility_16": 1.385, "facility_17": 0.0, "facility_18": 0.114, "facility_19": 6.4, "facility_20": 0.525, "facility_21": 1.16, "facility_22": 0.309858, "facility_23": 0.427087, "facility_24": 0.0, "facility_25": 0.525001, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 2.910161, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.13193}, {"year": "2019", "facility_0": 0.482, "facility_1": 0.721, "facility_2": 0.8, "facility_3": 2.707, "facility_4": 4.6, "facility_5": 0.0, "facility_6": 1.128, "facility_7": 0.27, "facility_8": 1.993, "facility_9": 0.23, "facility_10": 0.0, "facility_11": 0.05, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.1, "facility_16": 1.5, "facility_17": 0.56, "facility_18": 0.114, "facility_19": 7.05, "facility_20": 0.52, "facility_21": 1.16, "facility_22": 0.382859, "facility_23": 0.376409, "facility_24": 0.0, "facility_25": 0.519779, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 3.661626, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2020", "facility_0": 0.506, "facility_1": 0.422, "facility_2": 0.8, "facility_3": 2.1706, "facility_4": 7.0, "facility_5": 0.933, "facility_6": 0.941, "facility_7": 0.37, "facility_8": 1.772, "facility_9": 0.298, "facility_10": 0.0, "facility_11": 0.05, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.1, "facility_16": 1.9, "facility_17": 0.63, "facility_18": 0.114, "facility_19": 4.95, "facility_20": 0.51978, "facility_21": 0.660309, "facility_22": 0.21315, "facility_23": 0.418418, "facility_24": 0.0, "facility_25": 0.521581, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 2.138919, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.0, "facility_37": 0.0}, {"year": "2021", "facility_0": 0.322, "facility_1": 0.0, "facility_2": 0.8, "facility_3": 1.656, "facility_4": 8.7, "facility_5": 1.24, "facility_6": 1.055, "facility_7": 0.45, "facility_8": 1.922, "facility_9": 0.3076, "facility_10": 0.0, "facility_11": 0.05, "facility_12": 0.0, "facility_13": 0.0, "facility_14": 0.0, "facility_15": 0.1, "facility_16": 2.0, "facility_17": 0.62, "facility_18": 0.114, "facility_19": 2.61, "facility_20": 0.443928, "facility_21": 0.714124, "facility_22": 0.232994, "facility_23": 0.424816, "facility_24": 0.0, "facility_25": 0.519779, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.0, "facility_29": 0.0, "facility_30": 1.706149, "facility_31": 0.0, "facility_32": 0.0, "facility_33": 0.0, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.815505, "facility_37": 0.0}, {"year": "2022", "facility_0": 0.115, "facility_1": 0.402, "facility_2": 0.8, "facility_3": 1.72, "facility_4": 10.6, "facility_5": 1.034, "facility_6": 0.971, "facility_7": 0.5, "facility_8": 0.0, "facility_9": 0.657, "facility_10": 0.0, "facility_11": 0.05, "facility_12": 0.001, "facility_13": 0.0, "facility_14": 0.001, "facility_15": 0.1, "facility_16": 2.77, "facility_17": 0.59, "facility_18": 0.316, "facility_19": 3.0, "facility_20": 0.42858, "facility_21": 0.65243, "facility_22": 0.311307, "facility_23": 0.395332, "facility_24": 0.012, "facility_25": 0.42858, "facility_26": 0.0, "facility_27": 0.0, "facility_28": 0.076658, "facility_29": 0.0, "facility_30": 2.189392, "facility_31": 0.0, "facility_32": 0.081963, "facility_33": 0.023775, "facility_34": 0.0, "facility_35": 0.0, "facility_36": 0.768681, "facility_37": 0.092201}, {"year": "2023", "facility_0": 0.0, "facility_1": 0.0, "facility_2": 0.8, "facility_3": 1.5943, "facility_4": 13.0, "facility_5": 1.477649, "facility_6": 1.003, "facility_7": 0.0, "facility_8": 0.0, "facility_9": 0.472, "facility_10": 0.0, "facility_11": 0.05, "facility_12": 0.001, "facility_13": 0.0, "facility_14": 0.001, "facility_15": 0.1, "facility_16": 1.59, "facility_17": 0.68, "facility_18": 0.0, "facility_19": 3.67, "facility_20": 0.543979, "facility_21": 0.6313768, "facility_22": 0.260586, "facility_23": 0.43508, "facility_24": 0.01, "facility_25": 0.543978, "facility_26": 0.008, "facility_27": 0.03, "facility_28": 0.0095305, "facility_29": 0.033759, "facility_30": 5.198001, "facility_31": 0.36, "facility_32": 0.165834, "facility_33": 0.02236, "facility_34": 0.032576, "facility_35": 3.932897, "facility_36": 0.736405, "facility_37": 0.07}];

    const color = {"facility_0": "rgb(189,189,189)", "facility_1": "rgb(99,99,99)", "facility_2": "rgb(194,230,153)", "facility_3": "rgb(44,127,184)", "facility_4": "rgb(161,217,155)", "facility_5": "rgb(242,240,247)", "facility_6": "rgb(203,201,226)", "facility_7": "rgb(158,154,200)", "facility_8": "rgb(106,81,163)", "facility_9": "rgb(255,245,240)", "facility_10": "rgb(254,224,210)", "facility_11": "rgb(252,187,161)", "facility_12": "rgb(252,146,114)", "facility_13": "rgb(251,106,74)", "facility_14": "rgb(239,59,44)", "facility_15": "rgb(203,24,29)", "facility_16": "rgb(153,0,13)", "facility_17": "rgb(254,153,41)", "facility_18": "rgb(204,76,2)", "facility_19": "rgb(247,244,249)", "facility_20": "rgb(231,225,239)", "facility_21": "rgb(212,185,218)", "facility_22": "rgb(201,148,199)", "facility_23": "rgb(223,101,176)", "facility_24": "rgb(231,41,138)", "facility_25": "rgb(206,18,86)", "facility_26": "rgb(152,0,67)", "facility_27": "rgb(103,0,31)", "facility_28": "rgb(255,247,243)", "facility_29": "rgb(253,224,221)", "facility_30": "rgb(252,197,192)", "facility_31": "rgb(250,159,181)", "facility_32": "rgb(247,104,161)", "facility_33": "rgb(221,52,151)", "facility_34": "rgb(174,1,126)", "facility_35": "rgb(122,1,119)", "facility_36": "rgb(73,0,106)", "facility_37": "rgb(129,15,124)"}

    // Stack data
    const keys = ['facility_0', 'facility_1', 'facility_2', 'facility_3',
       'facility_4', 'facility_5', 'facility_6', 'facility_7', 'facility_8',
       'facility_9', 'facility_10', 'facility_11', 'facility_12',
       'facility_13', 'facility_14', 'facility_15', 'facility_16',
       'facility_17', 'facility_18', 'facility_19', 'facility_20',
       'facility_21', 'facility_22', 'facility_23', 'facility_24',
       'facility_25', 'facility_26', 'facility_27', 'facility_28',
       'facility_29', 'facility_30', 'facility_31', 'facility_32',
       'facility_33', 'facility_34', 'facility_35', 'facility_36',
       'facility_37'];
    const stack = d3.stack().keys(keys);
    const stackedData = stack(data);

    console.log(stackedData)

    // Scales
    const x = d3.scaleLinear()
        .domain(d3.extent(data, d => d.year))
        .range([0, width]);

    // const y = d3.scaleLog()
    //         .domain([0.07, d3.max(stackedData.flat(2))]) // Minimum value must be > 0
    //         .range([height, 0]);

    const y = d3.scaleLinear()
        .domain([0, d3.max(stackedData.flat(2))]) // Flatten stacked data
        .nice()
        .range([height, 0]);

    // Area generator
    const area = d3.area()
        .x(d => x(d.data.year))
        .y0(d => y(d[0]))
        .y1(d => y(d[1]));

    // Line generator
    const line = d3.line()
        .x(d => x(d.data.year))
        .y(d => y(d[1]));

    // Draw stacked areas
    svg.selectAll("path.area")
        .data(stackedData)
        .join("path")
        .attr("class", "area")
        .attr("fill", d => color[d.key])
        // .attr("opacity", 0.6)
        .attr("d", area);

    // // Draw solid boundary lines
    // svg.selectAll("path.line")
    //     .data(stackedData)
    //     .join("path")
    //     .attr("class", "line")
    //     .attr("fill", "none")
    //     .attr("stroke", "black")
    //     .attr("stroke-width", 2)
    //     .attr("d", line);

    // Apply different dashed segments to each group's line
    const dashedPatterns = {
        "valueA": "dotted", // Dotted (5,5)
        "valueB": "dashed", // Dashed (8,4)
        "valueC": "long-dashed" // Long dashed (12,6)
    };

    stackedData.forEach(series => {
        // const key = series.key;
        // const dashClass = dashedPatterns[key];

        // Split the dataset into dashed sections (first 4 points solid, last 3 dashed)
        svg.append("path")
            .datum(series.slice(0)) // Last 3 points
            // .attr("class", dashClass) // Apply unique dash pattern
            .attr("fill", "none")
            .attr("stroke", "black")
            .attr("stroke-width", 1)
            .attr("d", line);
    });

    // Axes
    svg.append("g")
        .attr("transform", `translate(0,${height})`)
        .call(d3.axisBottom(x));

    svg.append("g")
        .call(d3.axisLeft(y));
</script>